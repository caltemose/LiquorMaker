<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>LiquorMaker</title>
	
	<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript" language="javascript"></script>
	<script type="text/javascript">		
	
		$(document).ready(function(){
			$('#alcohol_form INPUT[name="submit"]').click(function(){
				calculate();
				return false;
			});
		});
	
		function isBad(value) {
			return value==''||isNaN(value);
		}
	
		function calculate() {
			var amount_flavored = $('#amount_flavored').val();
			var percent_used = $('#percent_used').val();
			var target_percent = $('#target_percent').val();
			var liquid_total = $('#liquid_total').val();
				
				
			if ( !isBad($('#target_percent').val()) ) {
							
				var valid = true;
				
				if (isBad(percent_used)) {
					console.log('percent_used bad');
					valid = false;
					$('#percent_used_container SPAN.errorContainer').text( "Percent alcohol must be a legit number.");
					
				} else $('#percent_used_container SPAN.errorContainer').text( "");				
				
				if (!valid) {
					console.log("form is not filled in correctly.");
					return;
				}
				
				var total = percent_used / target_percent;
				total = total * amount_flavored;
				
				var syrup_add = total - amount_flavored;
				
				$('#syrup_add').val( syrup_add );
				$('#liquid_total').val( total );
			}
			
			return false;
		}
		
		function changeMode(mode) {
			if (mode==='secondary') {
				$('#mode1').hide();
				$('#mode2').show();
			} else {
				$('#mode2').hide();
				$('#mode1').show();
			}
		}
		
	</script>
	
	<style type="text/css">
		BODY {
			font-family: Arial, sans-serif;
			font-size: 100%;
			margin: 1em;
			padding: 0;
			width: 90%;
			background: #fff;
		}
		FORM {
			width: 15em;
			float: left;
			padding: 1em;
			border: 1px solid #ccc;
			background: #ddd;
		}
		INPUT {
			font-size: 130%;
			width: 100%;
		}
		INPUT[name="submit"] {
			border-radius: 0.5em;
			border-color: #2B62FF;
			border-width: 2px;
			background: #87C3FF;
		}
		INPUT[name="submit"]:hover {
			cursor: pointer;
		}
		LABEL {
			display: block;
		}
		FORM DIV {
			margin: 0 0 1em 0;
		}
		DIV#liquorMaker {
			width: 47em;
			margin: 0 auto;
			overflow: auto;
		}
		DIV#info {
			float: left;
			margin-left: 1em;
			padding: 1em;
			width: 25em;
			border: 1px solid #ddd;
			overflow: auto;
			color: #555;
		}
		DIV#info DIV A {
			margin: 1em 0;
		}
		H2 {
			margin: 1em 0 0 0;
			padding: 0;
		}
		DIV#info H2:first-child {
			margin-top: 0;
		}
		DIV#info UL {
			list-style: none;
			margin: 1em 0 2em 0;
			padding: 0;
		}
		DIV#info UL LI {
			margin: 0 0 .5em 0;
			padding: 0;
		}
		H3 {
			margin: 0 0 1em 0;
			font-size: .8em;
			font-weight: normal;
			color: #338;
		}
		P {
			line-height: 130%;
		}
		.errorContainer {
			font-size: .8em;
			color: #c00;
		}
		.sub {
			font-size: .8em;
			font-style: italic;
			padding: 0 1em;
		}
	</style>
	
</head>
<body>

<div id="liquorMaker">
	<h1>LiquorMaker</h1>

	<form id="alcohol_form">
		<div id="amount_flavored_container">
			<label for="amount_flavored">Amount flavored:</label>
			<input type="number" size="20" name="amount_flavored" id="amount_flavored" value="200" />
			<span class="errorContainer"></span>
		</div>
		<div id="percent_used_container">
			<label for="percent_used">Percent alcohol used:</label>
			<input type="number" size="20" name="percent_used" id="percent_used" value="95" />
			<span class="errorContainer"></span>
		</div>
		<div id="target_percent_container">
			<label for="target_percent">Target Percent:</label>
			<input type="number" size="20" name="target_percent" id="target_percent"  value="38" />
			<span class="errorContainer"></span>
		</div>
		<div id="syrup_add_container">
			<label for="syrup_add">Syrup to add:</label>
			<input type="number" size="20" name="syrup_add" id="syrup_add" />
			<span class="errorContainer"></span>
		</div>
		<div id="liquid_total_container">
			<label for="liquid_total">For a total:</label>
			<input type="number" size="20" name="liquid_total" id="liquid_total"  />
			<span class="errorContainer"></span>
		</div>
		
		<input type="submit" name="submit" value="Calculate" />
		
	</form>
	
	
	<div id="info">
		
		<div id="mode1">
			<h2>I boozed up some ingredients.</h2>
			
			<ul>
				<li>How much booze are you flavorin'? [Amount flavored]</li>
				<li>What is the percent of grain alcohol you used? [Percent alcohol used]</li>
				<li>What is your target alcohol percent? [Target percent]</li>
				<li>Once you have that, click <strong>Calculate</strong> to see how much syrup you need to add and how much total finished liquor you'll get from it.</li>
			</ul>
			
			<a href="javascript:changeMode('secondary');">I need a 'pacific amount o' booze &raquo;</a>
		</div>
		
		<div id="mode2" style="display:none">
			<h2>I need a specific amount o' booze.</h2>
			
			<ul>
				<li>How much booze do you want? [For a total]<li>
				<li>What is the percent of grain alcohol you use? [Percent alcohol used]</li>
				<li>Once you have that, click <strong>Calculate</strong> to figure out how much grain alcohol you have to flavor.</li>
			</ul>
			
			<p><a href="javascript:changeMode('primary');">I boozed up some ingredients. How much it gonna make?</a></p>
		</div>
		
	</div>
	
</div>

</body>
</html>

